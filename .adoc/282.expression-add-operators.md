# [282.Expression Add Operators](https://leetcode.com/problems/expression-add-operators/description/)

## Description

**Tags**: divide-and-conquer

**Companies**: facebook,google

|  Category  |  Difficulty   | Likes | Dislikes |
| :--------: | :-----------: | :---: | :------: |
| algorithms | Hard (39.35%) | 3190  |   561    |

<p>Given a string <code>num</code> that contains only digits and an integer <code>target</code>, return <em><strong>all possibilities</strong> to insert the binary operators </em><code>&#39;+&#39;</code><em>, </em><code>&#39;-&#39;</code><em>, and/or </em><code>&#39;*&#39;</code><em> between the digits of </em><code>num</code><em> so that the resultant expression evaluates to the </em><code>target</code><em> value</em>.</p>
<p>Note that operands in the returned expressions <strong>should not</strong> contain leading zeros.</p>
<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>
<pre><code><strong>Input:</strong> num = &quot;123&quot;, target = 6
<strong>Output:</strong> [&quot;1*2*3&quot;,&quot;1+2+3&quot;]
<strong>Explanation:</strong> Both &quot;1*2*3&quot; and &quot;1+2+3&quot; evaluate to 6.</code></pre>
<p><strong class="example">Example 2:</strong></p>
<pre><code><strong>Input:</strong> num = &quot;232&quot;, target = 8
<strong>Output:</strong> [&quot;2*3+2&quot;,&quot;2+3*2&quot;]
<strong>Explanation:</strong> Both &quot;2*3+2&quot; and &quot;2+3*2&quot; evaluate to 8.</code></pre>
<p><strong class="example">Example 3:</strong></p>
<pre><code><strong>Input:</strong> num = &quot;3456237490&quot;, target = 9191
<strong>Output:</strong> []
<strong>Explanation:</strong> There are no expressions that can be created from &quot;3456237490&quot; to evaluate to 9191.</code></pre>
<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>
<ul>
  <li><code>1 &lt;= num.length &lt;= 10</code></li>
  <li><code>num</code> consists of only digits.</li>
  <li><code>-2<sup>31</sup> &lt;= target &lt;= 2<sup>31</sup> - 1</code></li>
</ul>

## Solution

**题目描述**

给定一个只包含数字 0-9 的字符串 num 和一个目标值 target，找出所有可能的加号、减号或乘号操作，使得表达式的计算结果等于目标值 target。返回所有可能的表达式字符串。

**解题思路**

1. 递归
   - 递归函数的参数
     - 结果集 `res`，包含符合要求的表达式
     - 当前的表达式 `path`，即包含数字和运算符的字符串
     - 输入字符串的下标 `pos`，当前需要处理的数字的下标
     - 当前的计算结果 `cur`
     - 上一个数字 `pre`，因为需要考虑乘法的优先级，因此需要一个变量保存上一个数字，如果当前数字为 0，那么可以直接将上一个数字和当前数字拼接起来，作为新的数字
     - 以及输入字符串 `num` 和目标值 `target`
   - 递归函数的终止条件：当前数字的下标等于输入字符串的长度，且当前的计算结果等于目标值，将当前的表达式加入结果集
   - 递归过程中，如果下标为 0，那么直接将当前数字作为新的表达式，否则，分别对加号、减号和乘号进行递归调用
     - 加号：`cur` 更新为 `cur + n`，`pre` 更新为 `n`，`path` 更新为 `path + "+" + s`
     - 减号：`cur` 更新为 `cur - n`，`pre` 更新为 `-n`，`path` 更新为 `path + "-" + s`
     - 乘号：`cur` 更新为 `cur - pre + pre * n`，`pre` 更新为 `pre * n`，`path` 更新为 `path + "*" + s`
   - 时间复杂度：O(4^n)，n 为输入字符串的长度，因为每个数字都有 4 种可能的情况，即加号、减号、乘号和不加符号

**极端情况**

- 输入字符串为空，返回空数组
- 输入字符串以 0 开头，而且长度大于 1
